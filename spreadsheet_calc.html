<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Solver Sistem Persamaan Non-Linear - NIM 21120123120003</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
            min-height: 100vh;
        }
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }
        .header h1 {
            font-size: 2em;
            margin-bottom: 10px;
        }
        .header p {
            opacity: 0.9;
        }
        .content {
            padding: 30px;
        }
        .equation-box {
            background: #f8f9fa;
            border-left: 4px solid #667eea;
            padding: 20px;
            margin-bottom: 30px;
            border-radius: 5px;
        }
        .equation-box h3 {
            color: #667eea;
            margin-bottom: 15px;
        }
        .equation {
            font-family: 'Courier New', monospace;
            font-size: 1.1em;
            margin: 10px 0;
            padding: 10px;
            background: white;
            border-radius: 5px;
        }
        .controls {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        .control-group {
            display: flex;
            flex-direction: column;
        }
        .control-group label {
            font-weight: bold;
            margin-bottom: 5px;
            color: #333;
        }
        .control-group input {
            padding: 10px;
            border: 2px solid #ddd;
            border-radius: 5px;
            font-size: 1em;
        }
        .control-group input:focus {
            outline: none;
            border-color: #667eea;
        }
        .button-group {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            margin-bottom: 30px;
        }
        button {
            flex: 1;
            min-width: 150px;
            padding: 12px 20px;
            font-size: 1em;
            font-weight: bold;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s;
        }
        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }
        .btn-secondary {
            background: #6c757d;
            color: white;
        }
        .btn-secondary:hover {
            background: #5a6268;
        }
        .results {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
        }
        .results h3 {
            color: #667eea;
            margin-bottom: 15px;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            background: white;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            border-radius: 5px;
            overflow: hidden;
        }
        th {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 12px;
            text-align: center;
            font-weight: bold;
        }
        td {
            padding: 10px;
            text-align: center;
            border-bottom: 1px solid #ddd;
        }
        tr:hover {
            background: #f5f5f5;
        }
        .summary {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        .summary-card {
            background: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            border-left: 4px solid #667eea;
        }
        .summary-card h4 {
            color: #667eea;
            margin-bottom: 10px;
        }
        .summary-card p {
            font-size: 1.5em;
            font-weight: bold;
            color: #333;
        }
        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            border-bottom: 2px solid #ddd;
        }
        .tab {
            padding: 10px 20px;
            cursor: pointer;
            background: #f8f9fa;
            border: none;
            border-radius: 5px 5px 0 0;
            transition: all 0.3s;
        }
        .tab.active {
            background: #667eea;
            color: white;
        }
        .tab-content {
            display: none;
        }
        .tab-content.active {
            display: block;
        }
        .error {
            color: #dc3545;
            font-weight: bold;
        }
        .success {
            color: #28a745;
            font-weight: bold;
        }
        .scrollable {
            max-height: 400px;
            overflow-y: auto;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üî¢ Solver Sistem Persamaan Non-Linear</h1>
            <p>NIM: 21120123120003 | NIMx = 3 (g1B dan g2B)</p>
        </div>
        
        <div class="content">
            <div class="equation-box">
                <h3>Sistem Persamaan</h3>
                <div class="equation">f‚ÇÅ(x, y) = x¬≤ + xy - 10 = 0</div>
                <div class="equation">f‚ÇÇ(x, y) = y + 3xy¬≤ - 57 = 0</div>
                <div style="margin-top: 15px;">
                    <strong>Fungsi Iterasi (NIMx = 3):</strong>
                    <div class="equation">g1B(x, y) = ‚àö(10 - xy)</div>
                    <div class="equation">g2B(x, y) = 57 / (1 + 3xy)</div>
                </div>
            </div>

            <div class="controls">
                <div class="control-group">
                    <label>x‚ÇÄ (Initial x)</label>
                    <input type="number" id="x0" value="1.5" step="0.1">
                </div>
                <div class="control-group">
                    <label>y‚ÇÄ (Initial y)</label>
                    <input type="number" id="y0" value="3.5" step="0.1">
                </div>
                <div class="control-group">
                    <label>Epsilon (Œµ)</label>
                    <input type="number" id="epsilon" value="0.000001" step="0.000001">
                </div>
                <div class="control-group">
                    <label>Max Iterasi</label>
                    <input type="number" id="maxIter" value="100" step="1">
                </div>
            </div>

            <div class="button-group">
                <button class="btn-primary" onclick="solveJacobi()">1. Jacobi (g1B, g2B)</button>
                <button class="btn-primary" onclick="solveSeidel()">2. Seidel (g1B, g2B)</button>
                <button class="btn-primary" onclick="solveNewtonRaphson()">3. Newton-Raphson</button>
                <button class="btn-primary" onclick="solveSecant()">4. Secant</button>
                <button class="btn-secondary" onclick="clearResults()">Clear</button>
            </div>

            <div class="tabs">
                <button class="tab active" onclick="showTab('jacobi')">Jacobi</button>
                <button class="tab" onclick="showTab('seidel')">Seidel</button>
                <button class="tab" onclick="showTab('newton')">Newton-Raphson</button>
                <button class="tab" onclick="showTab('secant')">Secant</button>
                <button class="tab" onclick="showTab('comparison')">Perbandingan</button>
            </div>

            <div id="jacobi" class="tab-content active">
                <div class="results">
                    <h3>Metode Jacobi (g1B dan g2B)</h3>
                    <div id="jacobiResults"></div>
                </div>
            </div>

            <div id="seidel" class="tab-content">
                <div class="results">
                    <h3>Metode Gauss-Seidel (g1B dan g2B)</h3>
                    <div id="seidelResults"></div>
                </div>
            </div>

            <div id="newton" class="tab-content">
                <div class="results">
                    <h3>Metode Newton-Raphson</h3>
                    <div id="newtonResults"></div>
                </div>
            </div>

            <div id="secant" class="tab-content">
                <div class="results">
                    <h3>Metode Secant</h3>
                    <div id="secantResults"></div>
                </div>
            </div>

            <div id="comparison" class="tab-content">
                <div class="results">
                    <h3>Perbandingan Semua Metode</h3>
                    <div id="comparisonResults"></div>
                </div>
            </div>
        </div>
    </div>

    <script>
        const data = {
            jacobi: null,
            seidel: null,
            newton: null,
            secant: null
        };

        function getInputs() {
            return {
                x0: parseFloat(document.getElementById('x0').value),
                y0: parseFloat(document.getElementById('y0').value),
                epsilon: parseFloat(document.getElementById('epsilon').value),
                maxIter: parseInt(document.getElementById('maxIter').value)
            };
        }

        function f1(x, y) {
            return x * x + x * y - 10;
        }

        function f2(x, y) {
            return y + 3 * x * y * y - 57;
        }

        function g1B(x, y) {
            const val = 10 - x * y;
            if (val < 0) return null;
            return Math.sqrt(val);
        }

        function g2B(x, y) {
            const denom = 1 + 3 * x * y;
            if (Math.abs(denom) < 1e-10) return null;
            return 57 / denom;
        }

        function df1_dx(x, y) { return 2 * x + y; }
        function df1_dy(x, y) { return x; }
        function df2_dx(x, y) { return 3 * y * y; }
        function df2_dy(x, y) { return 1 + 6 * x * y; }

        function solveJacobi() {
            const { x0, y0, epsilon, maxIter } = getInputs();
            let x = x0, y = y0;
            const results = [];

            for (let i = 0; i < maxIter; i++) {
                const xNew = g1B(x, y);
                const yNew = g2B(x, y);

                if (xNew === null || yNew === null) {
                    alert('Error: Fungsi iterasi tidak terdefinisi');
                    return;
                }

                const error = Math.max(Math.abs(xNew - x), Math.abs(yNew - y));
                results.push({
                    iter: i,
                    x: x,
                    y: y,
                    f1: f1(x, y),
                    f2: f2(x, y),
                    error: error
                });

                if (error < epsilon) {
                    x = xNew;
                    y = yNew;
                    results.push({
                        iter: i + 1,
                        x: x,
                        y: y,
                        f1: f1(x, y),
                        f2: f2(x, y),
                        error: error
                    });
                    break;
                }

                x = xNew;
                y = yNew;
            }

            data.jacobi = results;
            displayResults('jacobiResults', results, 'Jacobi');
            showTab('jacobi');
        }

        function solveSeidel() {
            const { x0, y0, epsilon, maxIter } = getInputs();
            let x = x0, y = y0;
            const results = [];

            for (let i = 0; i < maxIter; i++) {
                const xOld = x, yOld = y;

                const xNew = g1B(x, y);
                if (xNew === null) {
                    alert('Error: Fungsi g1B tidak terdefinisi');
                    return;
                }
                x = xNew;

                const yNew = g2B(x, y);
                if (yNew === null) {
                    alert('Error: Fungsi g2B tidak terdefinisi');
                    return;
                }
                y = yNew;

                const error = Math.max(Math.abs(x - xOld), Math.abs(y - yOld));
                results.push({
                    iter: i,
                    x: x,
                    y: y,
                    f1: f1(x, y),
                    f2: f2(x, y),
                    error: error
                });

                if (error < epsilon) {
                    break;
                }
            }

            data.seidel = results;
            displayResults('seidelResults', results, 'Seidel');
            showTab('seidel');
        }

        function solveNewtonRaphson() {
            const { x0, y0, epsilon, maxIter } = getInputs();
            let x = x0, y = y0;
            const results = [];

            for (let i = 0; i < maxIter; i++) {
                const j11 = df1_dx(x, y);
                const j12 = df1_dy(x, y);
                const j21 = df2_dx(x, y);
                const j22 = df2_dy(x, y);

                const det = j11 * j22 - j12 * j21;
                if (Math.abs(det) < 1e-10) {
                    alert('Error: Jacobian singular');
                    return;
                }

                const f1Val = f1(x, y);
                const f2Val = f2(x, y);

                const dx = -(j22 * f1Val - j12 * f2Val) / det;
                const dy = -(-j21 * f1Val + j11 * f2Val) / det;

                const error = Math.max(Math.abs(dx), Math.abs(dy));
                results.push({
                    iter: i,
                    x: x,
                    y: y,
                    f1: f1Val,
                    f2: f2Val,
                    error: error
                });

                x += dx;
                y += dy;

                if (error < epsilon) {
                    results.push({
                        iter: i + 1,
                        x: x,
                        y: y,
                        f1: f1(x, y),
                        f2: f2(x, y),
                        error: error
                    });
                    break;
                }
            }

            data.newton = results;
            displayResults('newtonResults', results, 'Newton-Raphson');
            showTab('newton');
        }

        function solveSecant() {
            const { x0, y0, epsilon, maxIter } = getInputs();
            let xPrev = x0, yPrev = y0;
            let xCurr = x0 + 0.1, yCurr = y0 + 0.1;
            const results = [];

            for (let i = 0; i < maxIter; i++) {
                const f1Prev = f1(xPrev, yPrev);
                const f2Prev = f2(xPrev, yPrev);
                const f1Curr = f1(xCurr, yCurr);
                const f2Curr = f2(xCurr, yCurr);

                const denomX = f1Curr - f1Prev;
                const denomY = f2Curr - f2Prev;

                if (Math.abs(denomX) < 1e-10 || Math.abs(denomY) < 1e-10) {
                    alert('Error: Pembagi terlalu kecil');
                    return;
                }

                const xNew = xCurr - f1Curr * (xCurr - xPrev) / denomX;
                const yNew = yCurr - f2Curr * (yCurr - yPrev) / denomY;

                const error = Math.max(Math.abs(xNew - xCurr), Math.abs(yNew - yCurr));
                results.push({
                    iter: i,
                    x: xCurr,
                    y: yCurr,
                    f1: f1Curr,
                    f2: f2Curr,
                    error: error
                });

                if (error < epsilon) {
                    results.push({
                        iter: i + 1,
                        x: xNew,
                        y: yNew,
                        f1: f1(xNew, yNew),
                        f2: f2(xNew, yNew),
                        error: error
                    });
                    break;
                }

                xPrev = xCurr;
                yPrev = yCurr;
                xCurr = xNew;
                yCurr = yNew;
            }

            data.secant = results;
            displayResults('secantResults', results, 'Secant');
            showTab('secant');
        }

        function displayResults(elementId, results, methodName) {
            const lastResult = results[results.length - 1];
            const converged = lastResult.error < parseFloat(document.getElementById('epsilon').value);

            let html = `
                <div class="summary">
                    <div class="summary-card">
                        <h4>Status</h4>
                        <p class="${converged ? 'success' : 'error'}">
                            ${converged ? '‚úì Konvergen' : '‚úó Tidak Konvergen'}
                        </p>
                    </div>
                    <div class="summary-card">
                        <h4>Jumlah Iterasi</h4>
                        <p>${results.length}</p>
                    </div>
                    <div class="summary-card">
                        <h4>Solusi x</h4>
                        <p>${lastResult.x.toFixed(8)}</p>
                    </div>
                    <div class="summary-card">
                        <h4>Solusi y</h4>
                        <p>${lastResult.y.toFixed(8)}</p>
                    </div>
                </div>
                <div class="scrollable" style="margin-top: 20px;">
                    <table>
                        <thead>
                            <tr>
                                <th>Iterasi</th>
                                <th>x</th>
                                <th>y</th>
                                <th>f‚ÇÅ(x,y)</th>
                                <th>f‚ÇÇ(x,y)</th>
                                <th>Error</th>
                            </tr>
                        </thead>
                        <tbody>
            `;

            results.forEach(r => {
                html += `
                    <tr>
                        <td>${r.iter}</td>
                        <td>${r.x.toExponential(6)}</td>
                        <td>${r.y.toExponential(6)}</td>
                        <td>${r.f1.toExponential(6)}</td>
                        <td>${r.f2.toExponential(6)}</td>
                        <td>${r.error.toExponential(6)}</td>
                    </tr>
                `;
            });

            html += `
                        </tbody>
                    </table>
                </div>
            `;

            document.getElementById(elementId).innerHTML = html;
            updateComparison();
        }

        function updateComparison() {
            if (!data.jacobi && !data.seidel && !data.newton && !data.secant) {
                return;
            }

            let html = `
                <table>
                    <thead>
                        <tr>
                            <th>Metode</th>
                            <th>Iterasi</th>
                            <th>Solusi x</th>
                            <th>Solusi y</th>
                            <th>f‚ÇÅ(x,y)</th>
                            <th>f‚ÇÇ(x,y)</th>
                            <th>Status</th>
                        </tr>
                    </thead>
                    <tbody>
            `;

            const methods = [
                { name: 'Jacobi (g1B, g2B)', data: data.jacobi },
                { name: 'Seidel (g1B, g2B)', data: data.seidel },
                { name: 'Newton-Raphson', data: data.newton },
                { name: 'Secant', data: data.secant }
            ];

            methods.forEach(method => {
                if (method.data) {
                    const last = method.data[method.data.length - 1];
                    const converged = last.error < parseFloat(document.getElementById('epsilon').value);
                    html += `
                        <tr>
                            <td><strong>${method.name}</strong></td>
                            <td>${method.data.length}</td>
                            <td>${last.x.toFixed(8)}</td>
                            <td>${last.y.toFixed(8)}</td>
                            <td>${last.f1.toExponential(6)}</td>
                            <td>${last.f2.toExponential(6)}</td>
                            <td class="${converged ? 'success' : 'error'}">
                                ${converged ? '‚úì Konvergen' : '‚úó Tidak Konvergen'}
                            </td>
                        </tr>
                    `;
                }
            });

            html += `
                    </tbody>
                </table>
                <div style="margin-top: 30px; padding: 20px; background: #e7f3ff; border-radius: 10px;">
                    <h4 style="color: #0066cc; margin-bottom: 15px;">üìä Analisis Konvergensi</h4>
                    <p style="margin-bottom: 10px;"><strong>Kecepatan Konvergensi:</strong></p>
                    <ul style="margin-left: 20px; line-height: 1.8;">
                        <li><strong>Newton-Raphson:</strong> Konvergensi kuadratik (paling cepat)</li>
                        <li><strong>Secant:</strong> Konvergensi superlinear</li>
                        <li><strong>Gauss-Seidel:</strong> Konvergensi linear (lebih cepat dari Jacobi)</li>
                        <li><strong>Jacobi:</strong> Konvergensi linear</li>
                    </ul>
                </div>
            `;

            document.getElementById('comparisonResults').innerHTML = html;
        }

        function showTab(tabName) {
            document.querySelectorAll('.tab').forEach(tab => tab.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
            
            event.target.classList.add('active');
            document.getElementById(tabName).classList.add('active');
        }

        function clearResults() {
            data.jacobi = null;
            data.seidel = null;
            data.newton = null;
            data.secant = null;
            
            document.getElementById('jacobiResults').innerHTML = '<p style="text-align:center; padding:20px;">Belum ada hasil. Klik tombol metode untuk menghitung.</p>';
            document.getElementById('seidelResults').innerHTML = '<p style="text-align:center; padding:20px;">Belum ada hasil. Klik tombol metode untuk menghitung.</p>';
            document.getElementById('newtonResults').innerHTML = '<p style="text-align:center; padding:20px;">Belum ada hasil. Klik tombol metode untuk menghitung.</p>';
            document.getElementById('secantResults').innerHTML = '<p style="text-align:center; padding:20px;">Belum ada hasil. Klik tombol metode untuk menghitung.</p>';
            document.getElementById('comparisonResults').innerHTML = '<p style="text-align:center; padding:20px;">Jalankan semua metode untuk melihat perbandingan.</p>';
        }

        clearResults